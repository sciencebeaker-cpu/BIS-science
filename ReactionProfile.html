<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reaction Profile Investigator - MYP5 Science</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        .transition-all { transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        .beaker-liquid { transition: fill 0.8s ease; }
    </style>
</head>
<body class="bg-slate-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Icons
        const HomeIcon = () => (<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>);
        const CheckIcon = () => (<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"><polyline points="20 6 9 17 4 12"/></svg>);
        const ZapIcon = () => (<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>);

        const App = () => {
            const [reactionType, setReactionType] = useState('exothermic'); // exothermic or endothermic
            const [energyBarrier, setEnergyBarrier] = useState('medium'); // low, medium, high
            const [hasCatalyst, setHasCatalyst] = useState(false);
            const [mission, setMission] = useState({ type: 'exothermic', barrier: 'high', label: "Combustion of Magnesium" });
            const [feedback, setFeedback] = useState(null);

            const missions = [
                { type: 'exothermic', barrier: 'high', label: "Combustion of Magnesium (Needs heat to start)" },
                { type: 'endothermic', barrier: 'medium', label: "Thermal Decomposition of CaCO₃" },
                { type: 'exothermic', barrier: 'low', label: "Neutralization (Acid + Base)" },
                { type: 'endothermic', barrier: 'high', label: "Photosynthesis (Energy absorbed from light)" }
            ];

            const nextMission = () => {
                const next = missions[Math.floor(Math.random() * missions.length)];
                setMission(next);
                setFeedback(null);
            };

            // SVG Graph Settings
            const w = 600;
            const h = 400;
            const reactantY = 220;
            const productY = reactionType === 'exothermic' ? 300 : 120;
            
            // Ea Mapping
            const eaHeights = { low: 60, medium: 120, high: 180 };
            const peakY = reactantY - eaHeights[energyBarrier];
            const catalystPeakY = peakY + 40;

            const checkDesign = () => {
                if (reactionType === mission.type && energyBarrier === mission.barrier) {
                    setFeedback({ type: 'success', text: "Excellent! The profile correctly represents this reaction." });
                } else {
                    setFeedback({ type: 'error', text: "Not quite. Check your Energy levels and Activation Energy again." });
                }
            };

            return (
                <div className="min-h-screen p-4 md:p-8 flex flex-col items-center">
                    <div className="w-full max-w-5xl">
                        
                        {/* Header */}
                        <header className="flex flex-col md:flex-row justify-between items-center bg-white p-5 rounded-2xl shadow-sm border border-slate-200 mb-6 gap-4">
                            <div className="flex items-center gap-4">
                                <a href="index.html" className="p-2.5 bg-slate-100 text-slate-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl transition-all"><HomeIcon /></a>
                                <div>
                                    <h1 className="text-xl font-black text-slate-900 leading-none">Reaction Profile Investigator</h1>
                                    <p className="text-xs text-slate-500 font-bold uppercase mt-1 tracking-wider">Unit 3: Energetics Lab</p>
                                </div>
                            </div>
                            <div className="flex items-center gap-3">
                                <div className="bg-indigo-50 border border-indigo-200 px-4 py-2 rounded-xl text-center">
                                    <div className="text-[10px] font-black uppercase text-indigo-400">Target Scenario</div>
                                    <div className="font-bold text-indigo-900">{mission.label}</div>
                                </div>
                                <button onClick={nextMission} className="p-2.5 bg-slate-100 text-slate-500 hover:bg-slate-200 rounded-xl">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M3 21v-5h5"/><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/></svg>
                                </button>
                            </div>
                        </header>

                        <div className="grid grid-cols-1 lg:grid-cols-12 gap-6">
                            
                            {/* Control Sidebar */}
                            <div className="lg:col-span-4 space-y-4">
                                <div className="bg-white p-6 rounded-3xl border border-slate-200 shadow-sm">
                                    <h3 className="text-xs font-black text-slate-400 uppercase tracking-widest mb-4">1. Reaction Type</h3>
                                    <div className="grid grid-cols-2 gap-2 mb-6">
                                        <button 
                                            onClick={() => setReactionType('exothermic')}
                                            className={`py-3 rounded-xl text-xs font-bold border-2 transition-all ${reactionType === 'exothermic' ? 'bg-orange-50 border-orange-500 text-orange-700' : 'bg-white border-slate-100 text-slate-400'}`}
                                        >
                                            Exothermic
                                        </button>
                                        <button 
                                            onClick={() => setReactionType('endothermic')}
                                            className={`py-3 rounded-xl text-xs font-bold border-2 transition-all ${reactionType === 'endothermic' ? 'bg-blue-50 border-blue-500 text-blue-700' : 'bg-white border-slate-100 text-slate-400'}`}
                                        >
                                            Endothermic
                                        </button>
                                    </div>

                                    <h3 className="text-xs font-black text-slate-400 uppercase tracking-widest mb-4">2. Activation Energy (Eₐ)</h3>
                                    <div className="grid grid-cols-3 gap-2 mb-6">
                                        {['low', 'medium', 'high'].map(lvl => (
                                            <button 
                                                key={lvl}
                                                onClick={() => setEnergyBarrier(lvl)}
                                                className={`py-2 rounded-xl text-[10px] font-bold border-2 transition-all capitalize ${energyBarrier === lvl ? 'bg-indigo-50 border-indigo-500 text-indigo-700' : 'bg-white border-slate-100 text-slate-400'}`}
                                            >
                                                {lvl}
                                            </button>
                                        ))}
                                    </div>

                                    <h3 className="text-xs font-black text-slate-400 uppercase tracking-widest mb-4">3. Add Catalyst</h3>
                                    <button 
                                        onClick={() => setHasCatalyst(!hasCatalyst)}
                                        className={`w-full py-3 rounded-xl text-xs font-bold border-2 flex items-center justify-center gap-2 transition-all ${hasCatalyst ? 'bg-emerald-50 border-emerald-500 text-emerald-700' : 'bg-white border-slate-100 text-slate-400'}`}
                                    >
                                        <ZapIcon /> {hasCatalyst ? "Catalyst Applied" : "No Catalyst"}
                                    </button>
                                </div>

                                {/* Thermal Prediction Box */}
                                <div className="bg-slate-900 rounded-3xl p-6 text-white overflow-hidden relative">
                                    <div className="relative z-10">
                                        <h3 className="text-[10px] font-black text-slate-500 uppercase tracking-widest mb-4">Thermal Outcome</h3>
                                        <div className="flex items-center gap-4">
                                            <svg width="60" height="80" viewBox="0 0 60 80">
                                                <path d="M10 10 L10 70 Q10 75 15 75 L45 75 Q50 75 50 70 L50 10" fill="none" stroke="white" strokeWidth="2" />
                                                <path 
                                                    d="M12 40 L12 70 Q12 73 15 73 L45 73 Q48 73 48 70 L48 40 Z" 
                                                    className="beaker-liquid"
                                                    fill={reactionType === 'exothermic' ? '#f97316' : '#3b82f6'} 
                                                />
                                            </svg>
                                            <div>
                                                <div className="text-lg font-black">{reactionType === 'exothermic' ? 'Heat Released' : 'Heat Absorbed'}</div>
                                                <div className="text-xs text-slate-400">ΔH is {reactionType === 'exothermic' ? 'NEGATIVE (-)' : 'POSITIVE (+)'}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <button 
                                    onClick={checkDesign}
                                    className="w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-2xl font-black shadow-lg transition-all flex items-center justify-center gap-2"
                                >
                                    <CheckIcon /> Check Result
                                </button>
                            </div>

                            {/* Main Graph View */}
                            <div className="lg:col-span-8 flex flex-col gap-4">
                                <div className="bg-white p-6 rounded-[2.5rem] border border-slate-200 shadow-sm relative h-full">
                                    <svg viewBox="0 0 600 400" className="w-full h-full overflow-visible">
                                        {/* Axes */}
                                        <line x1="50" y1="350" x2="550" y2="350" stroke="#cbd5e1" strokeWidth="2" />
                                        <line x1="50" y1="350" x2="50" y2="50" stroke="#cbd5e1" strokeWidth="2" />
                                        <text x="30" y="200" className="text-[10px] font-black fill-slate-400" transform="rotate(-90, 30, 200)">POTENTIAL ENERGY</text>
                                        <text x="250" y="380" className="text-[10px] font-black fill-slate-400 tracking-widest uppercase">Reaction Progress</text>

                                        {/* Main Curve */}
                                        <path 
                                            d={`M 50 ${reactantY} L 150 ${reactantY} Q 300 ${peakY - 100} 450 ${productY} L 550 ${productY}`} 
                                            fill="none" stroke="#6366f1" strokeWidth="6" strokeLinecap="round" className="transition-all"
                                        />

                                        {/* Catalyst Dotted Curve */}
                                        {hasCatalyst && (
                                            <path 
                                                d={`M 150 ${reactantY} Q 300 ${catalystPeakY - 100} 450 ${productY}`} 
                                                fill="none" stroke="#10b981" strokeWidth="4" strokeDasharray="8,4" className="transition-all"
                                            />
                                        )}

                                        {/* Terminologies Labels */}
                                        {/* Activation Energy Arrow */}
                                        <line x1="280" y1={reactantY} x2="280" y2={peakY} stroke="#f43f5e" strokeWidth="2" />
                                        <path d={`M 276 ${peakY+6} L 280 ${peakY} L 284 ${peakY+6}`} fill="none" stroke="#f43f5e" strokeWidth="2" />
                                        <text x="290" y={(reactantY + peakY)/2} className="text-[11px] font-black fill-rose-600">Eₐ</text>
                                        
                                        {/* Enthalpy Delta H Arrow */}
                                        <line x1="520" y1={reactantY} x2="520" y2={productY} stroke="#334155" strokeWidth="2" />
                                        <path d={`M 516 ${productY > reactantY ? productY-6 : productY+6} L 520 ${productY} L 524 ${productY > reactantY ? productY-6 : productY+6}`} fill="none" stroke="#334155" strokeWidth="2" />
                                        <text x="530" y={(reactantY + productY)/2} className="text-[11px] font-black fill-slate-600">ΔH</text>

                                        {/* State Labels */}
                                        <rect x="70" y={reactantY - 30} width="80" height="25" rx="12" fill="white" stroke="#e2e8f0" strokeWidth="1" />
                                        <text x="110" y={reactantY - 13} textAnchor="middle" className="text-[10px] font-bold fill-slate-500 tracking-tight">REACTANTS</text>

                                        <rect x="450" y={productY - 30} width="80" height="25" rx="12" fill="white" stroke="#e2e8f0" strokeWidth="1" />
                                        <text x="490" y={productY - 13} textAnchor="middle" className="text-[10px] font-bold fill-slate-500 tracking-tight">PRODUCTS</text>
                                    </svg>

                                    {/* Feedback Toast */}
                                    {feedback && (
                                        <div className={`absolute bottom-6 left-6 right-6 p-4 rounded-2xl shadow-xl flex items-center gap-3 animate-bounce ${feedback.type === 'success' ? 'bg-emerald-600 text-white' : 'bg-rose-600 text-white'}`}>
                                            <div className="bg-white/20 p-2 rounded-lg">
                                                {feedback.type === 'success' ? <CheckIcon /> : <ZapIcon />}
                                            </div>
                                            <span className="font-bold text-sm">{feedback.text}</span>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>

                        {/* Interactive Explanation Section */}
                        <div className="mt-8 bg-white p-8 rounded-[2.5rem] border border-slate-200">
                            <h2 className="text-xl font-black text-slate-800 mb-6 flex items-center gap-3">
                                <span className="w-8 h-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center text-sm italic">i</span>
                                Understanding the Profile
                            </h2>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                                <div>
                                    <div className="text-xs font-black text-indigo-500 uppercase tracking-widest mb-2">Activation Energy (Eₐ)</div>
                                    <p className="text-sm text-slate-500 leading-relaxed">
                                        The minimum amount of energy particles must possess in order for a collision to be successful. Higher "hills" mean the reaction is harder to start.
                                    </p>
                                </div>
                                <div>
                                    <div className="text-xs font-black text-rose-500 uppercase tracking-widest mb-2">Enthalpy Change (ΔH)</div>
                                    <p className="text-sm text-slate-500 leading-relaxed">
                                        The difference between reactant and product energy. In <b>exothermic</b> reactions, energy is lost to the surroundings (negative). In <b>endothermic</b>, it is gained (positive).
                                    </p>
                                </div>
                                <div>
                                    <div className="text-xs font-black text-emerald-500 uppercase tracking-widest mb-2">The Catalyst Effect</div>
                                    <p className="text-sm text-slate-500 leading-relaxed">
                                        A catalyst provides an <b>alternative pathway</b>. This means the peak of the hill is lower, but the starting and ending energy levels (ΔH) remain identical.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
